#!/usr/bin/env node
const { sanitize } = require('../dist/index.js');

async function read(stream) {
  const chunks = [];
  for await (const chunk of stream) chunks.push(chunk);
  return Buffer.concat(chunks).toString('utf8');
}

(async function() {
  const input = JSON.parse(await read(process.stdin));
  const output = await sanitize(input);
  process.stdout.write(JSON.stringify(output, null, 2));
  process.stdout.write('\n');
  process.exit(0);
})();
